#:import Clock kivy.clock.Clock

<GameScreen>:
    on_leave: self.remove_indicator()
    BoxLayout:
        padding: [dp(5),]
        orientation: 'vertical'
        GridLayout:
            size_hint_y: None
            height: forfeit_button.height
            rows: 1
            Widget:
                size_hint_x: None
                width: forfeit_button.width
            MDLabel:
                id: black_timer
                text: "00:00"
                halign: 'center'
            MDLabel:
                id: red_timer
                text: "00:00"
                color: 1,0,0,1
                halign: 'center'
            MDIconButton:
                id: forfeit_button
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_color
                icon: 'flag'
                disabled: not root.game_is_playing
                on_release:
                    root.game_is_playing = False
                    root.forfeit()
        GridLayout:
            #id: captured_black_pieces
            id: top_captured_pieces
            cols: 8
            rows: 2
        FloatLayout:
            size_hint: 1, None
            height: self.width
            pos_hint: {"center_y": .5, "center_x": .5}
            BoxLayout:
                pos_hint: {"center_x": .5, "center_y": .5}
                padding: dp(15)
                Image:
                    keep_ratio: False
                    allow_stretch: True
                    source: "images/chess_cropped_transparent.png"
            HalfBoard:
                id: top_board
                # Top board
                size_hint: 1, .46
                pos_hint: {"top": 1, "center_x": .5}
                half: "top"
                player_color: "black" if app.player.is_red else "red"
            HalfBoard:
                # Bottom board
                half: "bottom"
                id: bottom_board
                size_hint: 1, .46
                pos_hint: {"top": .46, "center_x": .5}
                player_color: "red" if app.player.is_red else "black"
        GridLayout:
            #id: captured_red_pieces
            id: bottom_captured_pieces
            cols: 8
            rows: 2
