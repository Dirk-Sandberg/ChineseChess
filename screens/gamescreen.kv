#:import Clock kivy.clock.Clock

<GameScreen>:
    BoxLayout:
        padding: [dp(5),]
        orientation: 'vertical'
        GridLayout:
            rows: 1
            size_hint_y: None
            height: leave_game_button.height
            MDRectangleFlatIconButton:
                id: leave_game_button
                text: "Leave Game"
                icon: 'close'
                on_release:
                    root.return_to_home_screen()
            Widget:
            MDRectangleFlatIconButton:
                icon: 'replay'
                text: "Forfeit"
                on_release:
                    root.forfeit()
                    #root.new_game()
        GridLayout:
            #id: captured_black_pieces
            id: top_captured_pieces
            cols: 8
            rows: 2
        FloatLayout:
            size_hint: 1, None
            height: self.width
            pos_hint: {"center_y": .5, "center_x": .5}
            BoxLayout:
                pos_hint: {"center_x": .5, "center_y": .5}
                padding: dp(15)
                Image:
                    keep_ratio: False
                    allow_stretch: True
                    source: "images/chess_cropped_transparent.png"
            HalfBoard:
                id: top_board
                # Top board
                size_hint: 1, .46
                pos_hint: {"top": 1, "center_x": .5}
                half: "top"
                player_color: "black" if app.player.is_red else "red"
            HalfBoard:
                # Bottom board
                half: "bottom"
                id: bottom_board
                size_hint: 1, .46
                pos_hint: {"top": .46, "center_x": .5}
                player_color: "red" if app.player.is_red else "black"
        GridLayout:
            #id: captured_red_pieces
            id: bottom_captured_pieces
            cols: 8
            rows: 2
