<ChessPiece>:
    source: "images/blankpiece.png"
    keep_ratio: False
    allow_stretch: True
    player: "black"
    #color: (1,1,1,1) if self.player == "black" else (1,0,0,1)
    source: "images/%spiece%s.png"%(self.piece_type, self.player)
    indicator_source: "blankpiece"
    col: 0
    row: 0
    on_release:
        if app.is_turn_owner: self.handle_touch()
    AvailableMoveIndicator:
        color: (0,0,0,1) if root.indicator_source != 'available_move' else ((1,1,1,1) if 'blankpiece' in root.source else ((1,0,0,1) if root.player == "black" else (0,0,0,1)))
        # This is to make the indicators opposite colors of background, and it works, just doesn't look great
        #color: app.theme_cls.opposite_bg_normal if root.indicator_source != 'available_move' else (app.theme_cls.bg_normal if 'blankpiece' in root.source else ((1,0,0,1) if root.player == "black" else (0,0,0,1)))
        source: "images/" + root.indicator_source + ".png"
        pos: root.pos
        size_hint: None, None
        size: root.size#root.size[0]*0.75, root.size[1]*.75
    #Label:
    #    text: "%s,%s"%(root.row,root.col)
    #    pos: root.pos
    #    size: root.size
    #    color: 0,1,0,1
    #    canvas.before:
    #        Color:
    #            rgba: 0,0,0,0
    #        Rectangle:
    #            size: self.size
    #            pos: self.pos
